package lab

import akka.actor.{ActorSystem, Props}
import akka.testkit.{DefaultTimeout, ImplicitSender, TestKit}
import com.typesafe.config.ConfigFactory
import lab.Conversation.{ConversationConfig, ConversationResponse}
import lab.NLClassifier.{NLClassifierConfig, NLClassifierResponse}
import lab.PersonalityAnalytics.{PersonalityAnalyticsConfig, PersonalityAnalyticsResponse}
import lab.TextAnalytics.{TextAnalyticsConfig, TextAnalyticsResponse}
import lab.ToneAnalytics.{ToneAnalyticsConfig, ToneAnalyticsResponse}
import lab.TwitterBot.{Payload, TwitterBotConfig}
import org.scalatest.{BeforeAndAfterAll, Matchers, WordSpecLike}
import twitter4j.conf.ConfigurationBuilder

import scala.concurrent.duration._

/**
  * a Test to show some TestKit examples
  */
class TwitterBotSpec
  extends TestKit(ActorSystem(
    "TestKitUsageSpec",
    ConfigFactory.parseString(TwitterBotSpec.config)))
    with DefaultTimeout with ImplicitSender
    with WordSpecLike with Matchers with BeforeAndAfterAll {

  import TwitterBotSpec._

  val tweetBotRef = system.actorOf(Props(classOf[TwitterBot], TwitterBotConfig(twitterConf, toneAnalyticsConfig, textAnalyticsConfig, personalityAnalyticsConfig, nlClassifierConfig, converseConfig)))
  val toneAnalysisRef = system.actorOf(Props(classOf[ToneAnalytics], toneAnalyticsConfig))
  val textAnalysisRef = system.actorOf(Props(classOf[TextAnalytics], textAnalyticsConfig))
  val nlClassifierRef = system.actorOf(Props(classOf[NLClassifier], nlClassifierConfig))
  val personalityAnalyticsRef = system.actorOf(Props(classOf[PersonalityAnalytics], personalityAnalyticsConfig))
  val conversationRef = system.actorOf(Props(classOf[Conversation], converseConfig))

  override def afterAll {
    shutdown()
  }

  "A Conversation" should {
    "Respond with conversation response" in {
      var messages = Seq[String]()
      within(5000 millis) {
        conversationRef ! Payload("roytttr", "hello there", "", None)
        receiveWhile(5000 millis) {
          case msg: ConversationResponse => messages = msg.intent +: messages
        }
      }
      messages.length should be(1)
      println(messages)
    }
  }

  "A ToneAnalyzer" should {
    "Respond with tone" in {
      var messages = Seq[String]()
      within(5000 millis) {
        toneAnalysisRef ! Payload("roytttr", "i am so happy that this test works", "", None)
        receiveWhile(5000 millis) {
          case msg: ToneAnalyticsResponse => messages = msg.response +: messages
        }
      }
      messages.length should be(1)
      println(messages)
    }
  }

  "A TextAnalyzer" should {
    "Respond with text analysis" in {
      var messages = Seq[String]()
      within(5000 millis) {
        textAnalysisRef ! Payload("roytttr", "i am so happy that this test works", "", None)
        receiveWhile(5000 millis) {
          case msg: TextAnalyticsResponse => messages = msg.response +: messages
        }
      }
      messages.length should be(1)
      println(messages)
    }
  }

  "A NLClassifier" should {
    "Respond with classifier" in {
      var messages = Seq[String]()
      within(5000 millis) {
        nlClassifierRef ! Payload("roytttr", "i am so happy that this test works", "", None)
        receiveWhile(5000 millis) {
          case msg: NLClassifierResponse => messages = msg.response +: messages
        }
      }
      messages.length should be(1)
      println(messages)
    }
  }

  "A PersonalityAnalytics" should {
    "Respond with personality" in {
      var messages = Seq[String]()
      within(5000 millis) {
        personalityAnalyticsRef ! Payload("roytttr", "i am so happy that this test works", "", Some("Well, thank you very much, Jim, for this opportunity. I want to thank Governor Romney and the University\nof Denver for your hospitality.\n\nThere are a lot of points I want to make tonight, but the most important one is that 20 years ago I\nbecame the luckiest man on Earth because Michelle Obama agreed to marry me.\n\nAnd so I just want to wish, Sweetie, you happy anniversary and let you know that a year from\nnow we will not be celebrating it in front of 40 million people.\n\nYou know, four years ago we went through the worst financial crisis since the Great Depression.\nMillions of jobs were lost, the auto industry was on the brink of collapse. The financial system\nhad frozen up.\n\nAnd because of the resilience and the determination of the American people, we've begun to\nfight our way back. Over the last 30 months, we've seen 5 million jobs in the private sector\ncreated. The auto industry has come roaring back. And housing has begun to rise.\n\nBut we all know that we've still got a lot of work to do. And so the question here tonight is not\nwhere we've been, but where we're going.\n\nGovernor Romney has a perspective that says if we cut taxes, skewed towards the wealthy, and\nroll back regulations, that we'll be better off. I've got a different view.\n\nI think we've got to invest in education and training. I think it's important for us to develop new\nsources of energy here in America, that we change our tax code to make sure that we're helping\nsmall businesses and companies that are investing here in the United States, that we take some of\nthe money that we're saving as we wind down two wars to rebuild America and that we reduce\nour deficit in a balanced way that allows us to make these critical investments.\n\nNow, it ultimately is going to be up to the voters — to you — which path we should take. Are we\ngoing to double on top-down economic policies that helped to get us into this mess or do we\nembrace a new economic patriotism that says America does best when the middle class does\nbest? And I'm looking forward to having that debate.\n\nWell, let me talk specifically about what I think we need to do. First, we've\ngot to improve our education system and we've made enormous progress drawing on ideas both\nfrom Democrats and Republicans that are already starting to show gains in some of the toughest\nto deal with schools. We've got a program called Race to the Top that has prompted reforms in\n46 states around the country, raising standards, improving how we train teachers.\n\nSo now I want to hire another 100,000 new math and science teachers, and create 2 million more\nslots in our community colleges so that people can get trained for the jobs that are out there right\nnow. And I want to make sure that we keep tuition low for our young people.\n\nWhen it comes to our tax code, Governor Romney and I both agree that our corporate tax rate is\ntoo high, so I want to lower it, particularly for manufacturing, taking it down to 25 percent. But I\nalso want to close those loopholes that are giving incentives for companies that are shipping jobs\noverseas. I want to provide tax breaks for companies that are investing here in the United States.\n\nOn energy, Governor Romney and I, we both agree that we've got to boost American energy\nproduction, and oil and natural gas production are higher than they've been in years. But I also\n\nbelieve that we've got to look at the energy sources of the future, like wind and solar and\nbiofuels, and make those investments.\n\nSo all of this is possible. Now, in order for us to do it, we do have to close our deficit, and one of\nthe things I'm sure we'll be discussing tonight is, how do we deal with our tax code? And how do\nwe make sure that we are reducing spending in a responsible way, but also, how do we have\nenough revenue to make those investments?\n\nAnd this is where there's a difference, because Governor Romney's central economic plan calls\nfor a $5 trillion tax cut — on top of the extension of the Bush tax cuts — that's another trillion\ndollars — and $2 trillion in additional military spending that the military hasn't asked for. That's\n$8 trillion. How we pay for that, reduce the deficit, and make the investments that we need to\nmake, without dumping those costs onto middle-class Americans, I think is one of the central\nquestions of this campaign.\n\nWhen you add up all the loopholes and deductions that upper-income\nindividuals can — are currently taking advantage of, you take those all away, you don't come\nclose to paying for $5 trillion in tax cuts and $2 trillion in additional military spending.\n\nOBAMA: And that's why independent studies looking at this said the only way to meet\nGovernor Romney's pledge of not reducing the deficit or -- or — or not adding to the deficit is by\nburdening middle-class families. The average middle-class family with children would pay about\n$2,000 more.\n\nNow, that's not my analysis. That's the analysis of economists who have looked at this. And —\nand that kind of top — top-down economics, where folks at the top are doing well, so the average\nperson making $3 million is getting a $250,000 tax break, while middle-class families are\nburdened further, that's not what I believe is a recipe for economic growth.\n\nWell, for 18 months he's been running on this tax plan. And now, five\nweeks before the election, he's saying that his big, bold idea is, \"Never mind.\"\n\nAnd the fact is that if you are lowering the rates the way you described, Governor, then it is not\npossible to come up with enough deductions and loopholes that only affect high-income\nindividuals to avoid either raising the deficit or burdening the middle class. It's — it's math. It's\narithmetic.\n\nNow, Governor Romney and I do share a deep interest in encouraging small-business growth. So\nat the same time that my tax plan has already lowered taxes for 98 percent of families, I also\nlowered taxes for small businesses 18 times. And what I want to do is continue the tax rates —\nthe tax cuts that we put into place for small businesses and families.\n\nBut I have said that for incomes over $250,000 a year, that we should go back to the rates that we\nhad when Bill Clinton was president, when we created 23 million new jobs, went from deficit to\nsurplus, and created a whole lot of millionaires to boot.\n\nAnd the reason this is important is because by doing that, we cannot only reduce the deficit, we\ncannot only encourage job growth through small businesses, but we're also able to make the\ninvestments that are necessary in education or in energy.\n\nAnd we do have a difference, though, when it comes to definitions of small business. Under —\nunder my plan, 97 percent of small businesses would not see their income taxes go up. Governor\nRomney says, well, those top 3 percent, they're the job creators, they'd be burdened.\n\nBut under Governor Romney's definition, there are a whole bunch of millionaires and\nbillionaires who are small businesses. Donald Trump is a small business. Now, I know Donald\nTrump doesn't like to think of himself as small anything, but — but that's how you define small\nbusinesses if you're getting business income.\n\nAnd that kind of approach, I believe, will not grow our economy, because the only way to pay\nfor it without either burdening the middle class or blowing up our deficit is to make drastic cuts\nin things like education, making sure that we are continuing to invest in basic science and\nresearch, all the things that are helping America grow. And I think that would be a mistake.\n\nJim, I — you may want to move onto another topic, but I — I would just say\nthis to the American people. If you believe that we can cut taxes by $5 trillion and add $2 trillion\nin additional spending that the military is not asking for, $7 trillion — just to give you a sense,\nover 10 years, that's more than our entire defense budget — and you think that by closing\nloopholes and deductions for the well-to-do, somehow you will not end up picking up the tab,\nthen Governor Romney's plan may work for you.\n\nBut I think math, common sense, and our history shows us that's not a recipe for job growth.\nLook, we've tried this. We've tried both approaches. The approach that Governor Romney's\ntalking about is the same sales pitch that was made in 2001 and 2003, and we ended up with the\nslowest job growth in 50 years, we ended up moving from surplus to deficits, and it all\nculminated in the worst financial crisis since the Great Depression.\n\nBill Clinton tried the approach that I'm talking about. We created 23 million new jobs. We went\nfrom deficit to surplus. And businesses did very well. So, in some ways, we've got some data on\nwhich approach is more likely to create jobs and opportunity for Americans and I believe that the\neconomy works best when middle-class families are getting tax breaks so that they've got some\nmoney in their pockets, and those of us who have done extraordinarily well because of this\nmagnificent country that we live in, that we can afford to do a little bit more to make sure we're\nnot blowing up the deficit.\n\nI like it.\n\nWhen I walked into the Oval Office, I had more than a trillion-dollar deficit\ngreeting me. And we know where it came from: two wars that were paid for on a credit card; two\ntax cuts that were not paid for; and a whole bunch of programs that were not paid for; and then a\nmassive economic crisis.\n\nAnd despite that, what we've said is, yes, we had to take some initial emergency measures to\nmake sure we didn't slip into a Great Depression, but what we've also said is, let's make sure that\nwe are cutting out those things that are not helping us grow.\n\nSo 77 government programs, everything from aircrafts that the Air Force had ordered but weren't\nworking very well, 1 8 government —18 government programs for education that were well-\nintentioned, not weren't helping kids learn, we went after medical fraud in Medicare and\nMedicaid very aggressively, more aggressively than ever before, and have saved tens of billions\nof dollars, $50 billion of waste taken out of the system.\n\nAnd I worked with Democrats and Republicans to cut a trillion dollars out of our discretionary\ndomestic budget. That's the largest cut in the discretionary domestic budget since Dwight\nEisenhower.\n\nNow, we all know that we've got to do more. And so I've put forward a specific $4 trillion deficit\nreduction plan. It's on a website. You can look at all the numbers, what cuts we make and what\nrevenue we raise.\n\nAnd the way we do it is $2.50 for every cut, we ask for $1 of additional revenue, paid for, as I\nindicated earlier, by asking those of us who have done very well in this country to contribute a\nlittle bit more to reduce the deficit. Governor Romney earlier mentioned the Bowles-Simpson\ncommission. Well, that's how the commission — bipartisan commission that talked about how we\nshould move forward suggested we have to do it, in a balanced way with some revenue and some\nspending cuts. And this is a major difference that Governor Romney and I have.\n\nLet — let me just finish their point, because you're looking for contrast. You know, when\nGovernor Romney stood on a stage with other Republican candidates for the nomination and he\nwas asked, would you take $10 of spending cuts for just $1 of revenue? And he said no.\n\nNow, if you take such an unbalanced approach, then that means you are going to be gutting our\ninvestments in schools and education. It means that Governor Romney...\n\n... talked about Medicaid and how we could send it back to the states, but\neffectively this means a 30 percent cut in the primary program we help for seniors who are in\nnursing homes, for kids who are with disabilities.\n\nAnd — and that is not a right strategy for us to move forward.\n\nSorry.\n\nThat's what we've done, made some adjustments to it, and we're putting it\nforward before Congress right now, a $4 trillion plan...\n\nWell, we've had this discussion before.\n\nThere has to be revenue in addition to cuts. Now, Governor Romney has\nruled out revenue. He's ruled out revenue.\n\nIf — if we're serious, we've got to take a balanced, responsible approach.\nAnd by the way, this is not just when it comes to individual taxes. Let's talk about corporate\ntaxes.\n\nNow, I've identified areas where we can, right away, make a change that I believe would actually\nhelp the economy.\n\nThe oil industry gets $4 billion a year in corporate welfare. Basically, they get deductions that\nthose small businesses that Governor Romney refers to, they don't get.\n\nNow, does anybody think that ExxonMobil needs some extra money, when they're making\nmoney every time you go to the pump? Why wouldn't we want to eliminate that? Why wouldn't\nwe eliminate tax breaks for corporate jets? My attitude is, if you got a corporate jet, you can\nprobably afford to pay full freight, not get a special break for it.\n\nWhen it comes to corporate taxes, Governor Romney has said he wants to, in a revenue neutral\nway, close loopholes, deductions — he hasn't identified which ones they are -- but that thereby\nbring down the corporate rate.\n\nWell, I want to do the same thing, but I've actually identified how we can do that. And part of the\nway to do it is to not give tax breaks to companies that are shipping jobs overseas.\n\nRight now, you can actually take a deduction for moving a plant overseas. I think most\nAmericans would say that doesn't make sense. And all that raises revenue.\n\nAnd so if we take a balanced approach, what that then allows us to do is also to help young\npeople, the way we already have during my administration, make sure that they can afford to go\nto college.\n\nIt means that the teacher that I met in Las Vegas, a wonderful young lady, who describes to me —\nshe's got 42 kids in her class. The first two weeks she's got them, some of them sitting on the\nfloor until finally they get reassigned. They're using text books that are 10 years old.\n\nThat is not a recipe for growth. That's not how America was built. And so budgets reflect\nchoices.\n\nUltimately, we're going to have to make some decisions. And if we're asking for no revenue, then\nthat means that we've got to get rid of a whole bunch of stuff.\n\nAnd the magnitude of the tax cuts that you're talking about, Governor, would end up resulting in\nsevere hardship for people, but more importantly, would not help us grow.\n\nAs I indicated before, when you talk about shifting Medicaid to states, we're talking about\npotentially a 30 — a 30 percent cut in Medicaid over time.\n\nNow, you know, that may not seem like a big deal when it just is, you know, numbers on a sheet\nof paper, but if we're talking about a family who's got an autistic kid and is depending on that\nMedicaid, that's a big problem.\n\nAnd governors are creative. There's no doubt about it. But they're not creative enough to make\nup for 30 percent of revenue on something like Medicaid. What ends up happening is some\npeople end up not getting help.\n\nIt's time to end it.\n\nOK.\n\nYou know, I suspect that, on Social Security, we've got a somewhat similar\nposition. Social Security is structurally sound. It's going to have to be tweaked the way it was by\nRonald Reagan and Speaker — Democratic Speaker Tip O'Neill. But it is — the basic structure is\nsound.\n\nBut — but I want to talk about the values behind Social Security and Medicare, and then talk\nabout Medicare, because that's the big driver of our deficits right now.\n\nYou know, my grandmother — some of you know — helped to raise me. My grandparents did.\nMy grandfather died a while back. My grandmother died three days before I was elected\npresident. And she was fiercely independent. She worked her way up, only had a high school\neducation, started as a secretary, ended up being the vice president of a local bank. And she\nended up living alone by choice.\n\nAnd the reason she could be independent was because of Social Security and Medicare. She had\nworked all her life, put in this money, and understood that there was a basic guarantee, a floor\nunder which she could not go.\n\nAnd that's the perspective I bring when I think about what's called entitlements. You know, the\nname itself implies some sense of dependency on the part of these folks. These are folks who've\nworked hard, like my grandmother, and there are millions of people out there who are counting\non this.\n\nSo my approach is to say, how do we strengthen the system over the long term? And in\nMedicare, what we did was we said, we are going to have to bring down the costs if we're going\nto deal with our long-term deficits, but to do that, let's look where some of the money's going.\n\n$716 billion we were able to save from the Medicare program by no longer overpaying insurance\ncompanies by making sure that we weren't overpaying providers. And using that money, we\nwere actually able to lower prescription drug costs for seniors by an average of $600, and we\nwere also able to make a -- make a significant dent in providing them the kind of preventive care\nthat will ultimately save money through the — throughout the system.\n\nSo the way for us to deal with Medicare in particular is to lower health care costs. When it comes\nto Social Security, as I said, you don't need a major structural change in order to make sure that\nSocial Security is there for the future.\n\nFirst of all, I think it's important for Governor Romney to present this plan\nthat he says will only affect folks in the future.\n\nAnd the essence of the plan is that you would turn Medicare into a voucher program. It's called\npremium support, but it's understood to be a voucher program. His running mate...\n\nI don't. And let me explain why.\n\nI understand.\n\nFor — so if you're — if you're 54 or 55, you might want to listen 'cause this -\n- this will affect you.\n\nThe idea, which was originally presented by Congressman Ryan, your running mate, is that we\nwould give a voucher to seniors and they could go out in the private marketplace and buy their\nown health insurance.\n\nThe problem is that because the voucher wouldn't necessarily keep up with health care inflation,\nit was estimated that this would cost the average senior about $6,000 a year.\n\nNow, in fairness, what Governor Romney has now said is he'll maintain traditional Medicare\nalongside it. But there's still a problem, because what happens is, those insurance companies are\npretty clever at figuring out who are the younger and healthier seniors. They recruit them,\nleaving the older, sicker seniors in Medicare. And every health care economist that looks at it\nsays, over time, what'll happen is the traditional Medicare system will collapse.\n\nAnd then what you've got is folks like my grandmother at the mercy of the private insurance\nsystem precisely at the time when they are most in need of decent health care.\n\nSo, I don't think vouchers are the right way to go. And this is not my own — only my opinion.\nAARP thinks that the — the savings that we obtained from Medicare bolster the system, lengthen\nthe Medicare trust fund by eight years. Benefits were not affected at all. And ironically, if you\nrepeal Obamacare, and I have become fond of this term, \"Obamacare,\" if you repeal it, what\nhappens is those seniors right away are going to be paying $600 more in prescription care.\nThey're now going to have to be paying copays for basic checkups that can keep them healthier.\n\nAnd the primary beneficiary of that repeal are insurance companies that are estimated to gain\nbillions of dollars back when they aren't making seniors any healthier. And I don't think that's the\nright approach when it comes to making sure that Medicare is stronger over the long term.\n\nJim, if I — if I can just respond very quickly, first of all, every study has\nshown that Medicare has lower administrative costs than private insurance does, which is why\nseniors are generally pretty happy with it.\n\nAnd private insurers have to make a profit. Nothing wrong with that. That's what they do. And so\nyou've got higher administrative costs, plus profit on top of that. And if you are going to save\nany money through what Governor Romney's proposing, what has to happen is, is that the money\nhas to come from somewhere.\n\nAnd when you move to a voucher system, you are putting seniors at the mercy of those insurance\ncompanies. And over time, if traditional Medicare has decayed or fallen apart, then they're stuck.\n\nAnd this is the reason why AARP has said that your plan would weaken Medicare substantially.\nAnd that's why they were supportive of the approach that we took."))
        receiveWhile(5000 millis) {
          case msg: PersonalityAnalyticsResponse => messages = msg.response +: messages
        }
      }
      messages.length should be(1)
      println(messages)
    }
  }

  "A TwitterBot" should {
    "not respond" ignore {
      within(5000 millis) {
        tweetBotRef ! Payload("roytttr", "i am so happy that this test works", "", Some("Well, thank you very much, Jim, for this opportunity. I want to thank Governor Romney and the University\nof Denver for your hospitality.\n\nThere are a lot of points I want to make tonight, but the most important one is that 20 years ago I\nbecame the luckiest man on Earth because Michelle Obama agreed to marry me.\n\nAnd so I just want to wish, Sweetie, you happy anniversary and let you know that a year from\nnow we will not be celebrating it in front of 40 million people.\n\nYou know, four years ago we went through the worst financial crisis since the Great Depression.\nMillions of jobs were lost, the auto industry was on the brink of collapse. The financial system\nhad frozen up.\n\nAnd because of the resilience and the determination of the American people, we've begun to\nfight our way back. Over the last 30 months, we've seen 5 million jobs in the private sector\ncreated. The auto industry has come roaring back. And housing has begun to rise.\n\nBut we all know that we've still got a lot of work to do. And so the question here tonight is not\nwhere we've been, but where we're going.\n\nGovernor Romney has a perspective that says if we cut taxes, skewed towards the wealthy, and\nroll back regulations, that we'll be better off. I've got a different view.\n\nI think we've got to invest in education and training. I think it's important for us to develop new\nsources of energy here in America, that we change our tax code to make sure that we're helping\nsmall businesses and companies that are investing here in the United States, that we take some of\nthe money that we're saving as we wind down two wars to rebuild America and that we reduce\nour deficit in a balanced way that allows us to make these critical investments.\n\nNow, it ultimately is going to be up to the voters — to you — which path we should take. Are we\ngoing to double on top-down economic policies that helped to get us into this mess or do we\nembrace a new economic patriotism that says America does best when the middle class does\nbest? And I'm looking forward to having that debate.\n\nWell, let me talk specifically about what I think we need to do. First, we've\ngot to improve our education system and we've made enormous progress drawing on ideas both\nfrom Democrats and Republicans that are already starting to show gains in some of the toughest\nto deal with schools. We've got a program called Race to the Top that has prompted reforms in\n46 states around the country, raising standards, improving how we train teachers.\n\nSo now I want to hire another 100,000 new math and science teachers, and create 2 million more\nslots in our community colleges so that people can get trained for the jobs that are out there right\nnow. And I want to make sure that we keep tuition low for our young people.\n\nWhen it comes to our tax code, Governor Romney and I both agree that our corporate tax rate is\ntoo high, so I want to lower it, particularly for manufacturing, taking it down to 25 percent. But I\nalso want to close those loopholes that are giving incentives for companies that are shipping jobs\noverseas. I want to provide tax breaks for companies that are investing here in the United States.\n\nOn energy, Governor Romney and I, we both agree that we've got to boost American energy\nproduction, and oil and natural gas production are higher than they've been in years. But I also\n\nbelieve that we've got to look at the energy sources of the future, like wind and solar and\nbiofuels, and make those investments.\n\nSo all of this is possible. Now, in order for us to do it, we do have to close our deficit, and one of\nthe things I'm sure we'll be discussing tonight is, how do we deal with our tax code? And how do\nwe make sure that we are reducing spending in a responsible way, but also, how do we have\nenough revenue to make those investments?\n\nAnd this is where there's a difference, because Governor Romney's central economic plan calls\nfor a $5 trillion tax cut — on top of the extension of the Bush tax cuts — that's another trillion\ndollars — and $2 trillion in additional military spending that the military hasn't asked for. That's\n$8 trillion. How we pay for that, reduce the deficit, and make the investments that we need to\nmake, without dumping those costs onto middle-class Americans, I think is one of the central\nquestions of this campaign.\n\nWhen you add up all the loopholes and deductions that upper-income\nindividuals can — are currently taking advantage of, you take those all away, you don't come\nclose to paying for $5 trillion in tax cuts and $2 trillion in additional military spending.\n\nOBAMA: And that's why independent studies looking at this said the only way to meet\nGovernor Romney's pledge of not reducing the deficit or -- or — or not adding to the deficit is by\nburdening middle-class families. The average middle-class family with children would pay about\n$2,000 more.\n\nNow, that's not my analysis. That's the analysis of economists who have looked at this. And —\nand that kind of top — top-down economics, where folks at the top are doing well, so the average\nperson making $3 million is getting a $250,000 tax break, while middle-class families are\nburdened further, that's not what I believe is a recipe for economic growth.\n\nWell, for 18 months he's been running on this tax plan. And now, five\nweeks before the election, he's saying that his big, bold idea is, \"Never mind.\"\n\nAnd the fact is that if you are lowering the rates the way you described, Governor, then it is not\npossible to come up with enough deductions and loopholes that only affect high-income\nindividuals to avoid either raising the deficit or burdening the middle class. It's — it's math. It's\narithmetic.\n\nNow, Governor Romney and I do share a deep interest in encouraging small-business growth. So\nat the same time that my tax plan has already lowered taxes for 98 percent of families, I also\nlowered taxes for small businesses 18 times. And what I want to do is continue the tax rates —\nthe tax cuts that we put into place for small businesses and families.\n\nBut I have said that for incomes over $250,000 a year, that we should go back to the rates that we\nhad when Bill Clinton was president, when we created 23 million new jobs, went from deficit to\nsurplus, and created a whole lot of millionaires to boot.\n\nAnd the reason this is important is because by doing that, we cannot only reduce the deficit, we\ncannot only encourage job growth through small businesses, but we're also able to make the\ninvestments that are necessary in education or in energy.\n\nAnd we do have a difference, though, when it comes to definitions of small business. Under —\nunder my plan, 97 percent of small businesses would not see their income taxes go up. Governor\nRomney says, well, those top 3 percent, they're the job creators, they'd be burdened.\n\nBut under Governor Romney's definition, there are a whole bunch of millionaires and\nbillionaires who are small businesses. Donald Trump is a small business. Now, I know Donald\nTrump doesn't like to think of himself as small anything, but — but that's how you define small\nbusinesses if you're getting business income.\n\nAnd that kind of approach, I believe, will not grow our economy, because the only way to pay\nfor it without either burdening the middle class or blowing up our deficit is to make drastic cuts\nin things like education, making sure that we are continuing to invest in basic science and\nresearch, all the things that are helping America grow. And I think that would be a mistake.\n\nJim, I — you may want to move onto another topic, but I — I would just say\nthis to the American people. If you believe that we can cut taxes by $5 trillion and add $2 trillion\nin additional spending that the military is not asking for, $7 trillion — just to give you a sense,\nover 10 years, that's more than our entire defense budget — and you think that by closing\nloopholes and deductions for the well-to-do, somehow you will not end up picking up the tab,\nthen Governor Romney's plan may work for you.\n\nBut I think math, common sense, and our history shows us that's not a recipe for job growth.\nLook, we've tried this. We've tried both approaches. The approach that Governor Romney's\ntalking about is the same sales pitch that was made in 2001 and 2003, and we ended up with the\nslowest job growth in 50 years, we ended up moving from surplus to deficits, and it all\nculminated in the worst financial crisis since the Great Depression.\n\nBill Clinton tried the approach that I'm talking about. We created 23 million new jobs. We went\nfrom deficit to surplus. And businesses did very well. So, in some ways, we've got some data on\nwhich approach is more likely to create jobs and opportunity for Americans and I believe that the\neconomy works best when middle-class families are getting tax breaks so that they've got some\nmoney in their pockets, and those of us who have done extraordinarily well because of this\nmagnificent country that we live in, that we can afford to do a little bit more to make sure we're\nnot blowing up the deficit.\n\nI like it.\n\nWhen I walked into the Oval Office, I had more than a trillion-dollar deficit\ngreeting me. And we know where it came from: two wars that were paid for on a credit card; two\ntax cuts that were not paid for; and a whole bunch of programs that were not paid for; and then a\nmassive economic crisis.\n\nAnd despite that, what we've said is, yes, we had to take some initial emergency measures to\nmake sure we didn't slip into a Great Depression, but what we've also said is, let's make sure that\nwe are cutting out those things that are not helping us grow.\n\nSo 77 government programs, everything from aircrafts that the Air Force had ordered but weren't\nworking very well, 1 8 government —18 government programs for education that were well-\nintentioned, not weren't helping kids learn, we went after medical fraud in Medicare and\nMedicaid very aggressively, more aggressively than ever before, and have saved tens of billions\nof dollars, $50 billion of waste taken out of the system.\n\nAnd I worked with Democrats and Republicans to cut a trillion dollars out of our discretionary\ndomestic budget. That's the largest cut in the discretionary domestic budget since Dwight\nEisenhower.\n\nNow, we all know that we've got to do more. And so I've put forward a specific $4 trillion deficit\nreduction plan. It's on a website. You can look at all the numbers, what cuts we make and what\nrevenue we raise.\n\nAnd the way we do it is $2.50 for every cut, we ask for $1 of additional revenue, paid for, as I\nindicated earlier, by asking those of us who have done very well in this country to contribute a\nlittle bit more to reduce the deficit. Governor Romney earlier mentioned the Bowles-Simpson\ncommission. Well, that's how the commission — bipartisan commission that talked about how we\nshould move forward suggested we have to do it, in a balanced way with some revenue and some\nspending cuts. And this is a major difference that Governor Romney and I have.\n\nLet — let me just finish their point, because you're looking for contrast. You know, when\nGovernor Romney stood on a stage with other Republican candidates for the nomination and he\nwas asked, would you take $10 of spending cuts for just $1 of revenue? And he said no.\n\nNow, if you take such an unbalanced approach, then that means you are going to be gutting our\ninvestments in schools and education. It means that Governor Romney...\n\n... talked about Medicaid and how we could send it back to the states, but\neffectively this means a 30 percent cut in the primary program we help for seniors who are in\nnursing homes, for kids who are with disabilities.\n\nAnd — and that is not a right strategy for us to move forward.\n\nSorry.\n\nThat's what we've done, made some adjustments to it, and we're putting it\nforward before Congress right now, a $4 trillion plan...\n\nWell, we've had this discussion before.\n\nThere has to be revenue in addition to cuts. Now, Governor Romney has\nruled out revenue. He's ruled out revenue.\n\nIf — if we're serious, we've got to take a balanced, responsible approach.\nAnd by the way, this is not just when it comes to individual taxes. Let's talk about corporate\ntaxes.\n\nNow, I've identified areas where we can, right away, make a change that I believe would actually\nhelp the economy.\n\nThe oil industry gets $4 billion a year in corporate welfare. Basically, they get deductions that\nthose small businesses that Governor Romney refers to, they don't get.\n\nNow, does anybody think that ExxonMobil needs some extra money, when they're making\nmoney every time you go to the pump? Why wouldn't we want to eliminate that? Why wouldn't\nwe eliminate tax breaks for corporate jets? My attitude is, if you got a corporate jet, you can\nprobably afford to pay full freight, not get a special break for it.\n\nWhen it comes to corporate taxes, Governor Romney has said he wants to, in a revenue neutral\nway, close loopholes, deductions — he hasn't identified which ones they are -- but that thereby\nbring down the corporate rate.\n\nWell, I want to do the same thing, but I've actually identified how we can do that. And part of the\nway to do it is to not give tax breaks to companies that are shipping jobs overseas.\n\nRight now, you can actually take a deduction for moving a plant overseas. I think most\nAmericans would say that doesn't make sense. And all that raises revenue.\n\nAnd so if we take a balanced approach, what that then allows us to do is also to help young\npeople, the way we already have during my administration, make sure that they can afford to go\nto college.\n\nIt means that the teacher that I met in Las Vegas, a wonderful young lady, who describes to me —\nshe's got 42 kids in her class. The first two weeks she's got them, some of them sitting on the\nfloor until finally they get reassigned. They're using text books that are 10 years old.\n\nThat is not a recipe for growth. That's not how America was built. And so budgets reflect\nchoices.\n\nUltimately, we're going to have to make some decisions. And if we're asking for no revenue, then\nthat means that we've got to get rid of a whole bunch of stuff.\n\nAnd the magnitude of the tax cuts that you're talking about, Governor, would end up resulting in\nsevere hardship for people, but more importantly, would not help us grow.\n\nAs I indicated before, when you talk about shifting Medicaid to states, we're talking about\npotentially a 30 — a 30 percent cut in Medicaid over time.\n\nNow, you know, that may not seem like a big deal when it just is, you know, numbers on a sheet\nof paper, but if we're talking about a family who's got an autistic kid and is depending on that\nMedicaid, that's a big problem.\n\nAnd governors are creative. There's no doubt about it. But they're not creative enough to make\nup for 30 percent of revenue on something like Medicaid. What ends up happening is some\npeople end up not getting help.\n\nIt's time to end it.\n\nOK.\n\nYou know, I suspect that, on Social Security, we've got a somewhat similar\nposition. Social Security is structurally sound. It's going to have to be tweaked the way it was by\nRonald Reagan and Speaker — Democratic Speaker Tip O'Neill. But it is — the basic structure is\nsound.\n\nBut — but I want to talk about the values behind Social Security and Medicare, and then talk\nabout Medicare, because that's the big driver of our deficits right now.\n\nYou know, my grandmother — some of you know — helped to raise me. My grandparents did.\nMy grandfather died a while back. My grandmother died three days before I was elected\npresident. And she was fiercely independent. She worked her way up, only had a high school\neducation, started as a secretary, ended up being the vice president of a local bank. And she\nended up living alone by choice.\n\nAnd the reason she could be independent was because of Social Security and Medicare. She had\nworked all her life, put in this money, and understood that there was a basic guarantee, a floor\nunder which she could not go.\n\nAnd that's the perspective I bring when I think about what's called entitlements. You know, the\nname itself implies some sense of dependency on the part of these folks. These are folks who've\nworked hard, like my grandmother, and there are millions of people out there who are counting\non this.\n\nSo my approach is to say, how do we strengthen the system over the long term? And in\nMedicare, what we did was we said, we are going to have to bring down the costs if we're going\nto deal with our long-term deficits, but to do that, let's look where some of the money's going.\n\n$716 billion we were able to save from the Medicare program by no longer overpaying insurance\ncompanies by making sure that we weren't overpaying providers. And using that money, we\nwere actually able to lower prescription drug costs for seniors by an average of $600, and we\nwere also able to make a -- make a significant dent in providing them the kind of preventive care\nthat will ultimately save money through the — throughout the system.\n\nSo the way for us to deal with Medicare in particular is to lower health care costs. When it comes\nto Social Security, as I said, you don't need a major structural change in order to make sure that\nSocial Security is there for the future.\n\nFirst of all, I think it's important for Governor Romney to present this plan\nthat he says will only affect folks in the future.\n\nAnd the essence of the plan is that you would turn Medicare into a voucher program. It's called\npremium support, but it's understood to be a voucher program. His running mate...\n\nI don't. And let me explain why.\n\nI understand.\n\nFor — so if you're — if you're 54 or 55, you might want to listen 'cause this -\n- this will affect you.\n\nThe idea, which was originally presented by Congressman Ryan, your running mate, is that we\nwould give a voucher to seniors and they could go out in the private marketplace and buy their\nown health insurance.\n\nThe problem is that because the voucher wouldn't necessarily keep up with health care inflation,\nit was estimated that this would cost the average senior about $6,000 a year.\n\nNow, in fairness, what Governor Romney has now said is he'll maintain traditional Medicare\nalongside it. But there's still a problem, because what happens is, those insurance companies are\npretty clever at figuring out who are the younger and healthier seniors. They recruit them,\nleaving the older, sicker seniors in Medicare. And every health care economist that looks at it\nsays, over time, what'll happen is the traditional Medicare system will collapse.\n\nAnd then what you've got is folks like my grandmother at the mercy of the private insurance\nsystem precisely at the time when they are most in need of decent health care.\n\nSo, I don't think vouchers are the right way to go. And this is not my own — only my opinion.\nAARP thinks that the — the savings that we obtained from Medicare bolster the system, lengthen\nthe Medicare trust fund by eight years. Benefits were not affected at all. And ironically, if you\nrepeal Obamacare, and I have become fond of this term, \"Obamacare,\" if you repeal it, what\nhappens is those seniors right away are going to be paying $600 more in prescription care.\nThey're now going to have to be paying copays for basic checkups that can keep them healthier.\n\nAnd the primary beneficiary of that repeal are insurance companies that are estimated to gain\nbillions of dollars back when they aren't making seniors any healthier. And I don't think that's the\nright approach when it comes to making sure that Medicare is stronger over the long term.\n\nJim, if I — if I can just respond very quickly, first of all, every study has\nshown that Medicare has lower administrative costs than private insurance does, which is why\nseniors are generally pretty happy with it.\n\nAnd private insurers have to make a profit. Nothing wrong with that. That's what they do. And so\nyou've got higher administrative costs, plus profit on top of that. And if you are going to save\nany money through what Governor Romney's proposing, what has to happen is, is that the money\nhas to come from somewhere.\n\nAnd when you move to a voucher system, you are putting seniors at the mercy of those insurance\ncompanies. And over time, if traditional Medicare has decayed or fallen apart, then they're stuck.\n\nAnd this is the reason why AARP has said that your plan would weaken Medicare substantially.\nAnd that's why they were supportive of the approach that we took."))
        expectNoMsg
      }
    }
  }
}

object TwitterBotSpec {
  val config =
    """
    akka {
      loglevel = "WARNING"
    } """

  val cognitiveConfig = ConfigFactory.load()

  val configurationBuilder = new ConfigurationBuilder()
  configurationBuilder.setOAuthConsumerKey(cognitiveConfig.getString("cognitive.twitter.consumerKey"))
    .setOAuthConsumerSecret(cognitiveConfig.getString("cognitive.twitter.consumerSecret"))
    .setOAuthAccessToken(cognitiveConfig.getString("cognitive.twitter.accessToken"))
    .setOAuthAccessTokenSecret(cognitiveConfig.getString("cognitive.twitter.accessTokenSecret"))

  val twitterConf = configurationBuilder.build()
  val toneAnalyticsConfig = ToneAnalyticsConfig(cognitiveConfig.getString("cognitive.watson.tone.username"), cognitiveConfig.getString("cognitive.watson.tone.password"))
  val textAnalyticsConfig = TextAnalyticsConfig(cognitiveConfig.getString("cognitive.watson.alchemy.apikey"))
  val personalityAnalyticsConfig = PersonalityAnalyticsConfig(cognitiveConfig.getString("cognitive.watson.personality.username"), cognitiveConfig.getString("cognitive.watson.personality.password"))
  val nlClassifierConfig = NLClassifierConfig(cognitiveConfig.getString("cognitive.watson.nlc.username"), cognitiveConfig.getString("cognitive.watson.nlc.password"))
  val converseConfig = ConversationConfig(cognitiveConfig.getString("cognitive.watson.converse.username"), cognitiveConfig.getString("cognitive.watson.converse.password"), cognitiveConfig.getString("cognitive.watson.converse.workspace"))


}
